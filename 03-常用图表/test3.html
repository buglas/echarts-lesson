<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>散点图</title>
    <style>
        #main{
            margin: 20px;
            height: 700px;
        }
    </style>
</head>
<body>
<div id="main"></div>
<script src="https://lib.baomitu.com/echarts/5.1.2/echarts.min.js"></script>
<script>
    const myChart = echarts.init(document.getElementById('main'));
    var data = [
        /*{
            V1: null,
            V2: '999',
            V3: 13,
            V4: '0.57',
        },*/
        {
            V1: '高等学校教师',
            V2: '教授',
            V3: 350,
            V4: '15.28',
        },
        {
            V1: '高等学校教师',
            V2: '副教授',
            V3: 410,
            V4: '17.90',
        },
        {
            V1: '高等学校教师',
            V2: '讲师',
            V3: 269,
            V4: '11.75',
        },
        {
            V1: '高等学校教师',
            V2: '助教',
            V3: 12,
            V4: '0.52',
        },
        {
            V1: '高等学校教师',
            V2: '无',
            V3: 93,
            V4: '4.06',
        },
        {
            V1: '高等学校研究',
            V2: '研究员',
            V3: 36,
            V4: '1.57',
        },
        {
            V1: '高等学校研究',
            V2: '副研究员',
            V3: 98,
            V4: '4.28',
        },
        {
            V1: '高等学校研究',
            V2: '助理研究员',
            V3: 129,
            V4: '5.63',
        },
        {
            V1: '高等学校研究',
            V2: '研究实习员',
            V3: 5,
            V4: '0.22',
        },
        {
            V1: '图书、资料专业人员',
            V2: '研究馆员（图书）',
            V3: 8,
            V4: '0.35',
        },
        {
            V1: '图书、资料专业人员',
            V2: '副研究馆员（图书）',
            V3: 9,
            V4: '0.39',
        },
        {
            V1: '图书、资料专业人员',
            V2: '馆员（图书）',
            V3: 34,
            V4: '1.48',
        },
        {
            V1: '图书、资料专业人员',
            V2: '助理馆员（图书）',
            V3: 3,
            V4: '0.13',
        },
        {
            V1: '工程技术人员',
            V2: '高级工程师',
            V3: 11,
            V4: '0.48',
        },
        {
            V1: '工程技术人员',
            V2: '工程师',
            V3: 12,
            V4: '0.52',
        },
        {
            V1: '工程技术人员',
            V2: '助理工程师',
            V3: 4,
            V4: '0.17',
        },
        {
            V1: '会计专业人员',
            V2: '高级会计师',
            V3: 4,
            V4: '0.17',
        },
        {
            V1: '会计专业人员',
            V2: '会计师',
            V3: 12,
            V4: '0.52',
        },
        {
            V1: '会计专业人员',
            V2: '助理会计师',
            V3: 8,
            V4: '0.35',
        },
        {
            V1: '出版专业人员（编辑）',
            V2: '编审',
            V3: 13,
            V4: '0.57',
        },
        {
            V1: '出版专业人员（编辑）',
            V2: '副编审',
            V3: 8,
            V4: '0.35',
        },
        {
            V1: '出版专业人员（编辑）',
            V2: '编辑',
            V3: 7,
            V4: '0.31',
        },
        {
            V1: '出版专业人员（编辑）',
            V2: '助理编辑',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '卫生技术人员（医）',
            V2: '副主任医师',
            V3: 8,
            V4: '0.35',
        },
        {
            V1: '卫生技术人员（医）',
            V2: '主治医师',
            V3: 14,
            V4: '0.61',
        },
        {
            V1: '卫生技术人员（医）',
            V2: '主管检验师',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '卫生技术人员（医）',
            V2: '副主任法医师',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '卫生技术人员（医）',
            V2: '主检法医师',
            V3: 2,
            V4: '0.09',
        },
        {
            V1: '卫生技术人员（医）',
            V2: '法医师',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '中学教师',
            V2: '二级教师（中学）',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '中小学教师',
            V2: '高级教师',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '中小学教师',
            V2: '一级教师',
            V3: 2,
            V4: '0.09',
        },
        {
            V1: '中小学教师',
            V2: '二级教师',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '实验技术人员',
            V2: '实验师',
            V3: 3,
            V4: '0.13',
        },
        {
            V1: '实验技术人员',
            V2: '助理实验师',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '经济专业人员',
            V2: '经济师',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '统计专业人员',
            V2: '统计师',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '新闻专业人员（编辑）',
            V2: '主任编辑',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '新闻专业人员（编辑）',
            V2: '编辑',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '卫生技术人员（药）',
            V2: '主管药师',
            V3: 2,
            V4: '0.09',
        },
        {
            V1: '卫生技术人员（药）',
            V2: '药师',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '卫生技术人员（护）',
            V2: '副主任护师',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '卫生技术人员（护）',
            V2: '主管护师',
            V3: 2,
            V4: '0.09',
        },
        {
            V1: '卫生技术人员（护）',
            V2: '护师',
            V3: 2,
            V4: '0.09',
        },
        {
            V1: '卫生技术人员（技）',
            V2: '主管技师',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '小学教师',
            V2: '二级教师（小学）',
            V3: 1,
            V4: '0.04',
        },
        {
            V1: '审计专业人员',
            V2: '审计师',
            V3: 2,
            V4: '0.09',
        },
        {
            V1: '审计专业人员',
            V2: '助理审计师',
            V3: 2,
            V4: '0.09',
        },
    ];
    let xData = [],
        sData = [],
        perData = [],
        xData1 = [];
    data.forEach((item) => {
        if (!xData1.includes(item.V1)) {
            xData1.push(item.V1);
        }
        xData.push(item.V2);
        sData.push(item.V3);
        perData.push(item.V4);
    });
    const source=aa()
    console.log('data',data);
    console.log('source',source);
    option = {
        color: ['rgb(149, 33, 33)'],
        grid: [
            {
                top: 5,
                bottom: 170,
            },
            {
                bottom: 120,
            },
        ],
        xAxis: [
            {
                type: 'category',
                data: xData,
                gridIndex: 0,
                axisLabel: {
                    color: '#333',
                    interval: 0,
                    rotate: '45',
                    textBorderWidth:5,
                    textBorderColor:'#fff'
                },
                zlevel: 10,
            },
            {
                type: 'category',
                data: xData1,
                gridIndex: 1,
                axisLabel: {
                    margin: 60,
                    interval: 0,
                },
                axisLine: {
                    show: false,
                },
                axisTick: {
                    length: 75,
                },
                zlevel: 1,
            },
        ],
        yAxis: [
            {},
            {
                type: 'value',
                gridIndex: 1,
                axisLabel: {
                    show: false,
                },
                axisLine: {
                    show: false,
                },
                splitLine: {
                    show: false,
                },
                axisTick: {
                    show: false,
                },
            },
        ],
        dataZoom: [
            {
                show: true,
                height: 15,
                xAxisIndex: [0, 1],
                bottom: 30,
                start: 0,
                end: 45,
                handleIcon:
                    'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',
                handleStyle: {
                    color: 'rgb(41, 171, 226)',
                },
                borderColor: 'rgb(41, 171, 226)',
            },
        ],
        series: [
            {
                type: 'bar',
                data:sData
            },
            { type: 'bar', xAxisIndex: 1, yAxisIndex: 1 },
        ],
    };
    function aa () {
        var arr = [];
        xData1.forEach(item=>{
            var arr1 = [];
            arr1.push(item);
            data.forEach(item1=>{
                if(item == item1.V1) {
                    arr1.push(item1.V3);
                }
            })
            arr.push(arr1)
        })
        return arr
    }

    myChart.setOption(option);


</script>
</body>
</html>
